(this["webpackJsonpreddit-clone"]=this["webpackJsonpreddit-clone"]||[]).push([[0],{46:function(e,t,r){},48:function(e,t,r){},54:function(e,t,r){},56:function(e,t,r){},57:function(e,t,r){},58:function(e,t,r){},59:function(e,t,r){},60:function(e,t,r){},61:function(e,t,r){},62:function(e,t,r){},63:function(e,t,r){},64:function(e,t,r){},65:function(e,t,r){},66:function(e,t,r){},67:function(e,t,r){},68:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){},71:function(e,t,r){},72:function(e,t,r){},73:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r.n(n),a=r(20),c=r.n(a),o=r(21),i=r(22),u=r(31),l={text:""},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case"SET_TEXT":return Object(u.a)(Object(u.a)({},e),{},{text:r});default:return e}},b=Object(i.b)({user:d}),p=Object(i.c)(b),j=(r(46),r(47),r(11)),m=r(7),h=(r(48),r(1)),O=function(){var e=Object(m.g)();return Object(h.jsxs)("div",{className:"nv-container",children:[Object(h.jsx)("div",{className:"readit-logo",onClick:function(){return e.push("/")},children:"readIt"}),Object(h.jsxs)("div",{className:"nav-end",children:[Object(h.jsx)("p",{className:"nav-user",onClick:function(){return e.push("/user/".concat(localStorage.user))},children:localStorage.id?localStorage.user:null}),Object(h.jsx)("div",{className:"navbar-button",onClick:function(){return localStorage.id?(localStorage.removeItem("id"),e.push("/signin")):e.push("/signin")},children:localStorage.id?"Sign Out":"Sign In"})]})]})},x=r(2),f=r.n(x),g=r(4),v=r(3),y=(r(54),r(78)),w=r(79),N=function(e){var t=e.message,r=Object(n.useState)(!0),s=Object(v.a)(r,2),a=s[0],c=s[1];return Object(h.jsxs)(y.a,{show:a,className:"panel-modal",children:[Object(h.jsx)(y.a.Header,{className:"panel-title",children:Object(h.jsx)(y.a.Title,{className:"",children:"Error"})}),Object(h.jsx)(y.a.Body,{className:"panel-message",children:t||"Unknown error. Please try again."}),Object(h.jsx)(y.a.Footer,{children:Object(h.jsx)(w.a,{variant:"secondary",onClick:function(){return c(!1),void window.location.reload()},children:"Try Again"})})]})},S=(r(56),function(e){var t=e.postId,r=e.votes,s=e.value,a=Object(n.useState)({error:!1,message:""}),c=Object(v.a)(a,2),o=c[0],i=c[1],u=Object(n.useState)(null),l=Object(v.a)(u,2),d=l[0],b=l[1],p=Object(n.useState)(0),j=Object(v.a)(p,2),m=j[0],O=j[1];Object(n.useEffect)((function(){b(s),O(r)}),[O]);var x=function(){var e=Object(g.a)(f.a.mark((function e(t,r){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/post/vote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:localStorage.id,postId:t,vote:r})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(s=e.sent,200===n.status){e.next=9;break}return e.abrupt("return",i({error:!0,message:s.message}));case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.log(e.t0),new Error;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t,!0);case 2:e.t0=d,e.next=!0===e.t0?5:!1===e.t0?7:null===e.t0?9:11;break;case 5:return O(m-1),e.abrupt("return",b(null));case 7:return O(m+2),e.abrupt("return",b(!0));case 9:return O(m+1),e.abrupt("return",b(!0));case 11:throw new Error;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t,!1);case 2:e.t0=d,e.next=!0===e.t0?5:!1===e.t0?7:null===e.t0?9:11;break;case 5:return O(m-2),e.abrupt("return",b(!1));case 7:return O(m+1),e.abrupt("return",b(null));case 9:return O(m-1),e.abrupt("return",b(!1));case 11:throw new Error;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"small-vote-body",children:[o.error?Object(h.jsx)(N,{message:o.message}):null,Object(h.jsx)("p",{className:!0===d?"small-up":"",onClick:localStorage.id?function(){return y()}:null,children:"\u2191"}),Object(h.jsx)("p",{className:"small-votes",children:m}),Object(h.jsx)("p",{className:!1===d?"small-down":"",onClick:localStorage.id?function(){return w()}:null,children:"\u2193"})]})}),k=(r(57),function(e){var t=e.postId,r=e.subreddit,n=e.title,s=e.user,a=e.date,c=e.votes,o=e.lastVote;return Object(h.jsx)("div",{className:"preview-container",children:Object(h.jsxs)("div",{className:"preview-box",children:[Object(h.jsx)(S,{votes:c,value:o,postId:t}),Object(h.jsxs)("div",{className:"preview-title-details",children:[Object(h.jsx)(j.b,{className:"preview-title",to:"/r/".concat(r,"/post=").concat(t),children:n}),Object(h.jsx)("br",{}),Object(h.jsxs)("p",{className:"preview-details",children:["submitted to ",Object(h.jsx)(j.b,{to:"/r/".concat(r),children:r+" "}),"by ",Object(h.jsx)(j.b,{to:"/user/".concat(s),children:s})," ","at ".concat(a.slice(0,10)+" "+a.slice(11,19))]})]})]})})}),T=(r(58),function(e){var t=e.frontpage,r=e.subreddit,s=e.profile,a=Object(n.useState)({error:!1,message:""}),c=Object(v.a)(a,2),o=c[0],i=c[1],u=Object(n.useState)([]),l=Object(v.a)(u,2),d=l[0],b=l[1],p=Object(n.useState)(!1),j=Object(v.a)(p,2),m=j[0],O=j[1],x=Object(n.useState)(10),y=Object(v.a)(x,2),S=y[0],T=y[1],C=function(){var e=Object(g.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b([]),e.prev=1,e.next=4,fetch("https://readit-server-1.herokuapp.com/post/previews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:localStorage.id,subredditName:t,limit:S,orderByVotes:m})});case 4:return r=e.sent,e.next=7,r.json();case 7:if(n=e.sent,200===r.status){e.next=11;break}return console.log("ERROR"),e.abrupt("return",i({error:!0,message:n.message}));case 11:return console.log(n.body),e.abrupt("return",b(n.body));case 15:throw e.prev=15,e.t0=e.catch(1),console.log(e.t0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(g.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b([]),e.prev=1,e.next=4,fetch("https://readit-server-1.herokuapp.com/user/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:localStorage.id,profileUser:t,limit:S,orderByVotes:m})});case 4:return r=e.sent,e.next=7,r.json();case 7:if(n=e.sent,200===r.status){e.next=11;break}return console.log("ERROR"),e.abrupt("return",i({error:!0,message:n.message}));case 11:return console.log(n),e.abrupt("return",b(n.body));case 15:throw e.prev=15,e.t0=e.catch(1),console.log(e.t0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(g.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b([]),e.prev=1,e.next=4,fetch("https://readit-server-1.herokuapp.com/frontpage/feed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:localStorage.id,limit:S,sortByVote:m})});case 4:return t=e.sent,e.next=7,t.json();case 7:if(r=e.sent,200===t.status){e.next=11;break}return console.log("ERROR"),e.abrupt("return",i({error:!0,message:r.message}));case 11:return console.log(r.body),e.abrupt("return",b(r.body));case 15:throw e.prev=15,e.t0=e.catch(1),console.log(e.t0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return r?C(r):s?I(s):t?E():void 0}),[S,m]),Object(h.jsxs)("div",{children:[o.error?Object(h.jsx)(N,{message:o.message}):null,Object(h.jsxs)("div",{children:[Object(h.jsx)(w.a,{className:"preview-button",onClick:function(){return O(!1)},children:"New"}),Object(h.jsx)(w.a,{className:"preview-button",onClick:function(){return O(!0)},children:"Top"})]}),d?d.map((function(e,t){return Object(h.jsx)(k,{postId:e.postId,subreddit:e.subreddit,title:e.title,user:e.user,votes:e.votes,lastVote:e.lastVote,date:e.date},t)})):null,d.length<10?null:Object(h.jsx)(w.a,{className:"preview-button mb-5",onClick:function(){return T(S+10)},children:"Load More"})]})}),C=function(){return Object(h.jsx)("div",{className:"m-5",children:Object(h.jsx)(T,{frontpage:!0})})},I=r(75),E=r(76),P=r(77),J=r(80),R=(r(59),function(){var e=Object(m.g)(),t=Object(n.useState)(""),r=Object(v.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)(""),o=Object(v.a)(c,2),i=o[0],u=o[1],l=Object(n.useState)(""),d=Object(v.a)(l,2),b=d[0],p=d[1],O=Object(n.useState)({error:!1,message:""}),x=Object(v.a)(O,2),y=x[0],S=x[1],k=function(){var t=Object(g.a)(f.a.mark((function t(){var r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,0!==b.length&&0!==i.length&&0!==s.length){t.next=3;break}return t.abrupt("return",S({error:!0,message:"You must complete all fields in order to sign up."}));case 3:return t.next=5,fetch("https://readit-server-1.herokuapp.com/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:b,email:i,password:s})});case 5:return r=t.sent,t.next=8,r.json();case 8:if(n=t.sent,200===r.status){t.next=13;break}return t.abrupt("return",S({error:!0,message:n}));case 13:return localStorage.setItem("id",n.id),localStorage.setItem("user",n.nick),t.abrupt("return",e.push("/"));case 16:t.next=22;break;case 18:throw t.prev=18,t.t0=t.catch(0),console.log("ERROR:",t.t0),new Error;case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsx)(I.a,{className:"center signup",children:Object(h.jsxs)(E.a,{children:[Object(h.jsx)(P.a,{sm:3}),Object(h.jsxs)(P.a,{sm:6,children:[Object(h.jsx)("h1",{className:"signup-title-box",children:Object(h.jsx)("span",{className:"signup-title rounded",children:"Sign Up"})}),y.error?Object(h.jsx)(N,{message:y.message}):null,Object(h.jsx)(J.a,{className:"signup-card",children:Object(h.jsxs)("form",{children:[Object(h.jsx)("label",{htmlFor:"input-user",className:"signup-subtitle",children:"User"}),Object(h.jsx)("input",{className:"form-input",type:"text",name:"user",value:b,placeholder:"User",onChange:function(e){return p(e.target.value)}}),Object(h.jsx)("label",{htmlFor:"input-email",className:"signup-subtitle",children:"E-mail"}),Object(h.jsx)("input",{className:"form-input",type:"email",name:"email",value:i,placeholder:"E-mail",onChange:function(e){return u(e.target.value)}}),Object(h.jsx)("label",{htmlFor:"input-password",className:"signup-subtitle",children:"Password"}),Object(h.jsx)("input",{className:"form-input",name:"password",value:s,type:"password",placeholder:"Password",onChange:function(e){return a(e.target.value)}}),Object(h.jsx)(w.a,{className:"mb-4 signup-button",variant:"secondary",onClick:function(){return k()},children:"Sign Up"}),Object(h.jsx)(j.b,{to:"/signin",children:"I already have an account"})]})})]}),Object(h.jsx)(P.a,{sm:3})]})})}),D=(r(60),function(){var e=Object(m.g)(),t=Object(n.useState)(""),r=Object(v.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)(""),o=Object(v.a)(c,2),i=o[0],u=o[1],l=Object(n.useState)({error:!1,message:""}),d=Object(v.a)(l,2),b=d[0],p=d[1],O=function(){var t=Object(g.a)(f.a.mark((function t(){var r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,0!==s.length&&0!==i.length){t.next=3;break}return t.abrupt("return",p({error:!0,message:"You must complete all fields in order to sign in."}));case 3:return t.next=5,fetch("https://readit-server-1.herokuapp.com/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:s,password:i})});case 5:return r=t.sent,t.next=8,r.json();case 8:if(n=t.sent,200===r.status){t.next=13;break}return t.abrupt("return",p({error:!0,message:n.message}));case 13:localStorage.setItem("id",n.id),localStorage.setItem("user",n.nick),e.push("/");case 16:t.next=22;break;case 18:throw t.prev=18,t.t0=t.catch(0),console.log("ERROR:",t.t0),t.t0;case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsx)(I.a,{className:"center signin",children:Object(h.jsxs)(E.a,{children:[Object(h.jsx)(P.a,{sm:3}),Object(h.jsxs)(P.a,{sm:6,children:[b.error?Object(h.jsx)(N,{message:b.message}):null,Object(h.jsx)("h1",{className:"signin-title-box",children:Object(h.jsx)("span",{className:"signin-title rounded",children:"Sign In"})}),Object(h.jsx)(J.a,{className:"signin-card",children:Object(h.jsxs)("form",{children:[Object(h.jsx)("label",{htmlFor:"input-user",className:"signin-subtitle",children:"User"}),Object(h.jsx)("input",{className:"form-input",type:"text",name:"user",value:s,placeholder:"User",onChange:function(e){return a(e.target.value)}}),Object(h.jsx)("label",{htmlFor:"input-password",className:"signin-subtitle",children:"Password"}),Object(h.jsx)("input",{className:"form-input",name:"password",value:i,type:"password",placeholder:"Password",onChange:function(e){return u(e.target.value)}}),Object(h.jsx)(w.a,{className:"mb-4 signin-button",variant:"secondary",onClick:function(){return O()},children:"Sign In"}),Object(h.jsx)(j.b,{to:"/signup",children:"I don't have an account"})]})})]}),Object(h.jsx)(P.a,{sm:3})]})})}),F=(r(61),function(){var e=Object(n.useState)({error:!1,message:""}),t=Object(v.a)(e,2),r=t[0],s=t[1],a=Object(n.useState)([]),c=Object(v.a)(a,2),o=c[0],i=c[1],u=Object(m.h)().user;u||s({error:!0,message:"User does not exist"});var l=function(){var e=Object(g.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/subreddit/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(r=e.sent,console.log(r),200===t.status){e.next=13;break}return console.log(r.message),e.abrupt("return",s({error:!0,message:r.message}));case 13:console.log(r.body),i(r.body);case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(0),console.log(e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return l()}),[]),Object(h.jsxs)(h.Fragment,{children:[r.error?Object(h.jsx)(N,{message:r.message}):null,Object(h.jsxs)("div",{className:"user-profile",children:[Object(h.jsxs)("div",{className:"user-posts",children:[Object(h.jsx)("p",{onClick:function(){return window.location.reload()},className:"profile-title",children:"Posts from ".concat(u)}),Object(h.jsx)(T,{profile:u})]}),Object(h.jsx)("div",{className:"user-subscriptions",children:Object(h.jsxs)("div",{className:"user-subscriptions-box",children:[Object(h.jsx)("p",{children:"A member of: "}),Object(h.jsx)("p",{children:o.map((function(e,t){return Object(h.jsx)(j.b,{className:"user-subscription",to:"/r/".concat(e),children:e},t)}))})]})})]})]})}),U=function(e){return{type:"SET_TEXT",payload:e}},A=(r(62),Object(o.b)((function(e){return{text:e.user.text}}),(function(e){return{setText:function(t){return e(U(t))}}}))((function(e){var t=e.title,r=e.name,s=e.limit,a=e.cols,c=e.rows,o=e.className,i=e.setText,u=e.text,l=Object(n.useState)(s),d=Object(v.a)(l,2),b=d[0],p=d[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"text-title-and-char",children:[Object(h.jsx)("label",{htmlFor:r,className:"text-label",children:t}),Object(h.jsx)("p",{className:b<=s/4?"char-warning":"char-count",children:b})]}),Object(h.jsx)("textarea",{name:r,maxLength:s.toString(),cols:a,rows:c,value:u,className:o,onChange:function(e){p(s-e.target.value.length),i(e.target.value)}})]})}))),V=(r(63),Object(m.i)(Object(o.b)((function(e){return{post:e.user.text}}),(function(e){return{setText:function(t){return e(U(t))}}}))((function(e){var t=e.history,r=e.post,s=e.setText,a=Object(m.h)().subredditName,c=Object(n.useState)({error:!1,message:""}),o=Object(v.a)(c,2),i=o[0],u=o[1],l=Object(n.useState)([]),d=Object(v.a)(l,2),b=d[0],p=d[1],j=Object(n.useState)(""),O=Object(v.a)(j,2),x=O[0],y=O[1],S=Object(n.useState)(""),k=Object(v.a)(S,2),T=k[0],C=k[1],I=function(){var e=Object(g.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/subreddit/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:localStorage.id})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(r=e.sent,200===t.status){e.next=12;break}return console.log(r.message),e.abrupt("return",u({error:!0,message:r.message}));case 12:p(r.body),y(a);case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),console.log(e.t0),e.t0;case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return I()}),[]);var E=function(){var e=Object(g.a)(f.a.mark((function e(){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0!==x.length&&0!==T.length&&0!==r.length){e.next=3;break}return e.abrupt("return",u({error:!0,message:"You must select a subreddit and complete all fields in order to post."}));case 3:return e.next=5,fetch("https://readit-server-1.herokuapp.com/post/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:localStorage.id,title:T,post:r,subreddit:x})});case 5:return n=e.sent,e.next=8,n.json();case 8:if(a=e.sent,200===n.status){e.next=13;break}return e.abrupt("return",u({error:!0,message:a.message}));case 13:s(""),t.push("/r/".concat(x,"/post=").concat(a.postId));case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(0),console.log(e.t0),new Error;case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return localStorage.id?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"container-fluid create-post",children:[i.error?Object(h.jsx)(N,{message:i.message}):null,Object(h.jsx)("div",{className:"create-post-form",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"select-subreddit",children:[Object(h.jsx)("label",{htmlFor:"subreddits",className:"select-subreddit-label",children:"Choose A Subreddit:"}),Object(h.jsx)("select",{value:x,onChange:function(e){y(e.target.value)},children:b.map((function(e,t){return Object(h.jsx)("option",{children:e},t)}))})]}),Object(h.jsxs)("div",{className:"create-post-input container-fluid",children:[Object(h.jsx)("label",{htmlFor:"title-input",className:"title-label",children:"Title"}),Object(h.jsx)("input",{className:"title-input",type:"text",name:"title",value:T,onChange:function(e){C(e.target.value)}}),Object(h.jsx)(A,{title:"Post",name:"post-input",limit:1e4,cols:"50",rows:"10",className:"post-input"}),Object(h.jsx)(w.a,{className:"post-button",variant:"secondary",onClick:E,children:"Submit"})]})]})})]})}):Object(h.jsx)(m.a,{to:"/signin"})})))),B=(r(64),function(e){var t=e.isSubscribed,r=Object(m.h)().subredditName,s=Object(n.useState)({error:!1,message:""}),a=Object(v.a)(s,2),c=a[0],o=a[1],i=Object(n.useState)(t),u=Object(v.a)(i,2),l=u[0],d=u[1];Object(n.useEffect)((function(){return d(t)}),[t]);var b=function(){var e=Object(g.a)(f.a.mark((function e(t){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/subreddit/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subreddit:r,userId:localStorage.id,subscription:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(s=e.sent,console.log(s),200===n.status){e.next=10;break}return e.abrupt("return",o({error:!0,message:s.message}));case 10:console.log(s.message),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[c.error?Object(h.jsx)(N,{message:c.message}):null,Object(h.jsx)(w.a,{className:l?"join btn-primary shadow-none":"leave btn-danger shadow-none",onClick:function(){return function(){switch(l){case!0:b(!1),d(!1);break;case!1:b(!0),d(!0);break;default:throw new Error}}()},children:Object(h.jsx)("p",{children:l?"leave":"join"})})]})}),L=(r(65),function(){var e=Object(n.useState)({error:!1,message:""}),t=Object(v.a)(e,2),r=t[0],s=t[1],a=Object(n.useState)({name:"",description:"",users:0,createdAt:"",isSubscribed:!1}),c=Object(v.a)(a,2),o=c[0],i=c[1],u=Object(m.h)().subredditName,l=function(){var e=Object(g.a)(f.a.mark((function e(t){var r,n,a,c,o,u,l,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/subreddit/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subredditName:t,userId:localStorage.id})});case 3:return r=e.sent,e.next=6,r.json();case 6:if(n=e.sent,200===r.status){e.next=9;break}return e.abrupt("return",s({error:!0,message:n.message}));case 9:a=n.body,c=a.subreddit,o=a.description,u=a.users,l=a.date,d=a.subscription,i({name:c,description:o,users:u,createdAt:l,isSubscribed:d}),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return l(u)}),[]),Object(h.jsxs)(I.a,{fluid:!0,className:"subreddit-container",children:[r.error?Object(h.jsx)(N,{message:r.message}):null,Object(h.jsx)("div",{className:"subreddit-title",children:Object(h.jsx)("h1",{className:"divider",onClick:function(){return window.location.reload()},children:o.name})}),Object(h.jsxs)(E.a,{children:[Object(h.jsx)(P.a,{sm:9,children:Object(h.jsx)(T,{subreddit:u})}),Object(h.jsxs)(P.a,{sm:3,className:"subreddit-info",children:[Object(h.jsxs)("div",{className:"subscribe-and-title ",children:[Object(h.jsx)("h2",{style:{display:"inline",cursor:"pointer"},onClick:function(){return window.location.reload()},children:o.name}),localStorage.id?Object(h.jsx)(B,{isSubscribed:o.isSubscribed}):null]}),Object(h.jsx)("hr",{className:"divider"}),Object(h.jsxs)("p",{children:[o.users," readers"]}),Object(h.jsx)("p",{children:o.description}),Object(h.jsx)("hr",{className:"divider"}),Object(h.jsxs)("p",{children:["created at ",o.createdAt.slice(0,10)]}),Object(h.jsx)("hr",{className:"divider"}),Object(h.jsx)(j.b,{to:"/submit/".concat(u),children:"Submit a New Post"})]})]})]})}),Y=(r(66),function(){var e=Object(n.useState)({error:!1,message:""}),t=Object(v.a)(e,2),r=t[0],s=t[1],a=Object(n.useState)(null),c=Object(v.a)(a,2),o=c[0],i=c[1],u=Object(n.useState)(0),l=Object(v.a)(u,2),d=l[0],b=l[1],p=Object(n.useState)(null),j=Object(v.a)(p,2),O=j[0],x=j[1],y=localStorage.id,w=Object(m.h)().postId,S=function(){var e=Object(g.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/post/votes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:y,postId:w})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(r=e.sent,200===t.status){e.next=9;break}return e.abrupt("return",s({error:!0,message:r.message}));case 9:return i(r.body.status),b(r.body.votes),x(r.body.percentage),e.abrupt("return");case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return S()}),[]);var k=function(){var e=Object(g.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/post/vote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:y,postId:w,vote:t})});case 3:return r=e.sent,e.next=6,r.json();case 6:if(n=e.sent,200===r.status){e.next=9;break}return e.abrupt("return",s({error:!0,message:n.message}));case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.log(e.t0),new Error;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(!0);case 2:e.t0=o,e.next=!0===e.t0?5:!1===e.t0?7:null===e.t0?9:11;break;case 5:return b(d-1),e.abrupt("return",i(null));case 7:return b(d+2),e.abrupt("return",i(!0));case 9:return b(d+1),e.abrupt("return",i(!0));case 11:throw new Error;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(!1);case 2:e.t0=o,e.next=!0===e.t0?5:!1===e.t0?7:null===e.t0?9:11;break;case 5:return b(d-2),e.abrupt("return",i(!1));case 7:return b(d+1),e.abrupt("return",i(null));case 9:return b(d-1),e.abrupt("return",i(!1));case 11:throw new Error;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"vote-body",children:[r.error?Object(h.jsx)(N,{message:r.message}):null,Object(h.jsx)("p",{className:!0===o?"up":"",onClick:y?function(){return T()}:null,children:"\u2191"}),Object(h.jsx)("p",{className:"votes",children:d}),Object(h.jsx)("p",{className:!1===o?"down":"",onClick:y?function(){return C()}:null,children:"\u2193"}),Object(h.jsx)("p",{className:null===O?"percentage-hidden":"percentage-upvoted",children:"".concat(O,"% upvoted")})]})}),H=(r(67),Object(o.b)((function(e){return{reply:e.user.text}}))((function(e){var t=e.commentId,r=e.reply,s=Object(n.useState)({error:!1,message:""}),a=Object(v.a)(s,2),c=a[0],o=a[1],i=function(){var e=Object(g.a)(f.a.mark((function e(){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,localStorage.id){e.next=3;break}return e.abrupt("return",Object(h.jsx)(m.a,{to:"/signin"}));case 3:if(0!==r.length){e.next=5;break}return e.abrupt("return",o({error:!0,message:"Reply must include some text"}));case 5:return e.next=7,fetch("https://readit-server-1.herokuapp.com/comment/submit-reply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prevCommentId:t,reply:r,userId:localStorage.id})});case 7:return n=e.sent,e.next=10,n.json();case 10:if(s=e.sent,200===n.status){e.next=14;break}return console.log(s.message),e.abrupt("return",o({error:!0,message:s.message}));case 14:console.log(s.message),window.location.reload(),e.next=22;break;case 18:throw e.prev=18,e.t0=e.catch(0),console.log(e.t0),e.t0;case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return localStorage.id?Object(h.jsxs)("div",{className:"create-comment",children:[c.error?Object(h.jsx)(N,{message:c.message}):null,Object(h.jsxs)("div",{className:"comment-input-box",children:[Object(h.jsx)(A,{title:"Reply",name:"comment-input",limit:5e3,cols:"5000",rows:"5",className:"comment-input"}),Object(h.jsx)(w.a,{className:"comment-button",variant:"secondary",onClick:i,children:"Submit"})]})]}):Object(h.jsx)(m.a,{to:"/signin"})}))),M=(r(68),function(e){var t=e.id,r=Object(n.useState)({error:!1,message:""}),s=Object(v.a)(r,2),a=s[0],c=s[1],o=Object(n.useState)(null),i=Object(v.a)(o,2),u=i[0],l=i[1],d=function(){var e=Object(g.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/comment/get-replies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentId:t,userId:localStorage.id})});case 3:return r=e.sent,e.next=6,r.json();case 6:if(n=e.sent,200===r.status){e.next=9;break}return e.abrupt("return",c({error:!0,message:n.message}));case 9:l(n.body),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return d(t)}),[]),Object(h.jsxs)("div",{children:[a.error?Object(h.jsx)(N,{message:a.message}):null,u?u.map((function(e){return Object(h.jsx)(X,{id:e.newCommentId,user:e.user,body:e.body,date:e.created,canDelete:e.canDelete})})):null]})}),X=(r(69),function(e){var t=e.id,r=e.user,s=e.body,a=e.date,c=e.parentHidden,o=e.canDelete,i=Object(n.useState)(!1),u=Object(v.a)(i,2),l=u[0],d=u[1],b=Object(n.useState)(!1),p=Object(v.a)(b,2),j=p[0],m=p[1],O=Object(n.useState)({error:!1,message:""}),x=Object(v.a)(O,2),y=x[0],w=x[1];!0===c&&d(!0);var S=function(){var e=Object(g.a)(f.a.mark((function e(){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/comment/delete-comment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:localStorage.id,commentId:t})});case 3:return r=e.sent,e.next=6,r.json();case 6:if(n=e.sent,200===r.status){e.next=9;break}return e.abrupt("return",w({error:!0,message:n.message}));case 9:console.log(n.message),window.location.reload(),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"comment",children:[y.error?Object(h.jsx)(N,{message:y.message}):null,Object(h.jsx)("div",{className:"comment-hide",onClick:l?function(){return d(!1)}:function(){return d(!0)},children:l?Object(h.jsx)("p",{children:"[+]"}):Object(h.jsx)("p",{children:"[-]"})}),Object(h.jsxs)("div",{className:"comment-box",children:[Object(h.jsx)("div",{className:l?"comment-info info-hidden":"comment-info",children:Object(h.jsxs)("p",{className:"comment-data",children:[Object(h.jsx)("a",{className:"comment-user",children:r}),", ".concat(a.slice(0,10)," T").concat(a.slice(11,19))]})}),Object(h.jsxs)("div",{className:l?"comment-hidden":"",children:[Object(h.jsx)("p",{children:s}),Object(h.jsxs)("div",{className:"comment-actions",children:[Object(h.jsx)("p",{onClick:function(){return m(!0)},className:"comment-action",children:"reply"}),!0===o?Object(h.jsx)("p",{onClick:function(){return S()},className:"comment-action",children:"delete"}):null]})]}),j&&!l?Object(h.jsx)(H,{commentId:t}):null,l?null:Object(h.jsx)(M,{id:t})]})]})}),_=(r(70),function(e){var t=e.postId,r=Object(n.useState)({error:!1,message:""}),s=Object(v.a)(r,2),a=s[0],c=s[1],o=Object(n.useState)([]),i=Object(v.a)(o,2),u=i[0],l=i[1],d=function(){var e=Object(g.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/comment/get-comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:t,userId:localStorage.id})});case 3:return r=e.sent,e.next=6,r.json();case 6:if(n=e.sent,200===r.status){e.next=9;break}return e.abrupt("return",c({error:!0,message:n.message}));case 9:l(n.body),console.log(n.body),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return d(t)}),[]),Object(h.jsxs)("div",{children:[a.error?Object(h.jsx)(N,{message:a.message}):null,u?u.map((function(e){return Object(h.jsx)(X,{id:e.id,user:e.user,body:e.text,date:e.date,canDelete:e.canDelete},e.id)})):null]})}),q=(r(71),Object(m.i)(Object(o.b)((function(e){return{comment:e.user.text}}),(function(e){return{setText:function(t){return e(U(t))}}}))((function(e){var t=e.postId,r=e.comment,s=e.setText,a=Object(n.useState)({error:!1,message:""}),c=Object(v.a)(a,2),o=c[0],i=c[1],u=Object(m.g)(),l=function(){var e=Object(g.a)(f.a.mark((function e(){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0!==r.length){e.next=3;break}return e.abrupt("return",i({error:!0,message:"Comment must include some text"}));case 3:return e.next=5,fetch("https://readit-server-1.herokuapp.com/comment/submit-comment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:t,comment:r,userId:localStorage.id})});case 5:return n=e.sent,e.next=8,n.json();case 8:if(a=e.sent,200===n.status){e.next=12;break}return console.log(a.message),e.abrupt("return",i({error:!0,message:a.message}));case 12:s(""),window.location.reload(),e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),console.log(e.t0),e.t0;case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"create-comment",children:[o.error?Object(h.jsx)(N,{message:o.message}):null,Object(h.jsxs)("div",{className:"comment-input-box",children:[Object(h.jsx)(A,{title:"Leave a comment",name:"comment-input",limit:5e3,cols:"5000",rows:"5",className:"comment-input"}),Object(h.jsx)(w.a,{className:"comment-button",variant:"secondary",onClick:localStorage.id?l:function(){return u.push("/signin")},children:"Submit"})]})]})})))),z=(r(72),function(){var e=Object(m.h)(),t=e.subredditName,r=e.postId,s=Object(n.useState)({error:!1,message:""}),a=Object(v.a)(s,2),c=a[0],o=a[1],i=Object(n.useState)({postUser:"",postTitle:"",postText:"",postDate:"",canDelete:!1}),u=Object(v.a)(i,2),l=u[0],d=u[1],b=l.postUser,p=l.postTitle,O=l.postText,x=l.postDate,y=l.canDelete,w=function(){var e=Object(g.a)(f.a.mark((function e(t,r){var n,s,a,c,i,u,l,b;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/post/fetch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subredditName:t,postId:r,userId:localStorage.id})});case 3:return n=e.sent,e.next=6,n.json();case 6:if(s=e.sent,console.log(s),200===n.status){e.next=11;break}return console.log(s.message),e.abrupt("return",o({error:!0,message:s.message}));case 11:a=s.body,c=a.postUser,i=a.postTitle,u=a.postText,l=a.postDate,b=a.canDelete,d({postUser:c,postTitle:i,postText:u,postDate:l,canDelete:b}),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(0),console.log(e.t0),new Error;case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return w(t,r)}),[]);var S=function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://readit-server-1.herokuapp.com/post/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:localStorage.id,postId:r})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,200===t.status){e.next=9;break}return e.abrupt("return",o({error:!0,message:n.message}));case 9:console.log(n.message),window.location.reload(),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(I.a,{className:"post-component",children:[c.error?Object(h.jsx)(N,{message:c.message}):null,Object(h.jsx)(j.b,{className:"subreddit-link",to:"/r/".concat(t),children:t}),Object(h.jsx)("hr",{className:"divider"}),Object(h.jsxs)("div",{className:"post-container",children:[Object(h.jsx)(Y,{userId:localStorage.id,postId:r}),Object(h.jsxs)("div",{className:"post",children:[Object(h.jsxs)("div",{className:"post-details",children:[Object(h.jsx)("p",{className:"post-title",children:p}),Object(h.jsxs)("div",{className:"post-user-date",children:[Object(h.jsx)("p",{className:"post-user",children:b}),Object(h.jsx)("p",{className:"post-date",children:x.slice(0,10)+" "+x.slice(11,16)})]})]}),Object(h.jsx)("div",{className:"post-body text-area",children:Object(h.jsx)("p",{children:O})}),!0===y?Object(h.jsx)("p",{onClick:function(){return S()},className:"delete-post",children:"delete"}):null]})]}),Object(h.jsx)(q,{postId:r}),Object(h.jsx)(_,{postId:r})]})}),G=function(){return Object(h.jsxs)(j.a,{children:[Object(h.jsx)(m.b,{path:"/",component:O}),Object(h.jsxs)(m.d,{children:[Object(h.jsx)(m.b,{exact:!0,path:"/",component:C}),Object(h.jsx)(m.b,{exact:!0,path:"/signup",component:R}),Object(h.jsx)(m.b,{exact:!0,path:"/signin",component:D}),Object(h.jsx)(m.b,{exact:!0,path:"/user/:user",component:F}),Object(h.jsx)(m.b,{exact:!0,path:"/submit/:subredditName",component:V}),Object(h.jsx)(m.b,{exact:!0,path:"/r/:subredditName",component:L}),Object(h.jsx)(m.b,{exact:!0,path:"/r/:subredditName/post=:postId",component:z})]})]})},K=function(){return Object(h.jsx)(o.a,{store:p,children:Object(h.jsx)(G,{})})};c.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(K,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.03463462.chunk.js.map